# DopeMAN App - 測試檢查清單

快速驗證應用程式所有功能是否正常運作。

---

## 📋 Phase 2 測試檢查清單

### ✅ 前置準備

- [ ] 進入專案目錄
  ```bash
  cd /Users/paul_huang/AgentProjects/dopeman/dopeman-app
  ```

- [ ] 安裝 Node.js 依賴
  ```bash
  npm install
  ```
  - [ ] 無錯誤訊息
  - [ ] `node_modules/` 目錄已建立
  - [ ] `package-lock.json` 已建立

---

### 🚀 基本功能測試

#### 1. 開發模式啟動

```bash
npm run dev
```

- [ ] 應用程式視窗開啟
- [ ] Dashboard 正常載入
- [ ] DevTools 自動開啟
- [ ] 控制台無錯誤訊息
- [ ] 端口資訊顯示正確
  - HTTP: 8891（或其他可用端口）
  - WebSocket: 8892（或 HTTP+1）

#### 2. 視窗功能

- [ ] 視窗大小正確（1400x900）
- [ ] 視窗可以調整大小
- [ ] 視窗可以最小化
- [ ] 視窗可以最大化
- [ ] 關閉視窗會最小化到托盤（而非退出）

#### 3. Dashboard 功能

- [ ] Skills Center 正常顯示
- [ ] 左上角「任務監控」按鈕可點擊
- [ ] 右上角「重新掃描」按鈕可點擊
- [ ] 左上角「個人資訊匯流」按鈕可點擊
- [ ] 所有 Skills 資料正確載入

#### 4. 任務監控功能

點擊「任務監控」按鈕：

- [ ] 頁面正常載入
- [ ] WebSocket 連線狀態顯示「已連線」
- [ ] 四個任務按鈕顯示：
  - [ ] 🔍 掃描 Skills
  - [ ] 🏥 健康檢查
  - [ ] 🔧 自動修復
  - [ ] 📊 更新資訊匯流

#### 5. 任務執行測試

點擊「掃描 Skills」按鈕：

- [ ] 任務卡片出現
- [ ] 進度條從 0% 開始
- [ ] 進度訊息即時更新
- [ ] 進度條顏色正確（紫色漸層）
- [ ] 完成後變綠色
- [ ] 顯示開始時間
- [ ] 1 分鐘內無法再次執行（冷卻機制）

點擊「健康檢查」按鈕：

- [ ] 任務正常執行
- [ ] 進度訊息正確
- [ ] 完成後顯示結果

---

### 🔒 單一實例測試

#### 測試步驟

1. 啟動第一個實例
   ```bash
   npm start
   ```

2. 開啟新終端機，啟動第二個實例
   ```bash
   cd /Users/paul_huang/AgentProjects/dopeman/dopeman-app
   npm start
   ```

#### 驗證項目

- [ ] 第二個實例自動退出
- [ ] 第二個終端機顯示「⚠️ DopeMAN 已在運行中」
- [ ] 第一個視窗自動聚焦
- [ ] 第一個視窗如果最小化，會自動還原

---

### 📌 系統托盤測試

#### 托盤圖示

- [ ] 系統托盤顯示 DopeMAN 圖示
- [ ] 圖示清晰可辨識
- [ ] 滑鼠移到圖示上顯示「DopeMAN Control Center」

#### 托盤選單（右鍵點擊）

- [ ] 「開啟 Dashboard」- 開啟主視窗並載入 Dashboard
- [ ] 「任務監控」- 開啟主視窗並載入任務監控頁面
- [ ] 分隔線顯示
- [ ] 「重新掃描」- 觸發掃描任務
- [ ] 「健康檢查」- 觸發健康檢查
- [ ] 分隔線顯示
- [ ] 「端口資訊」- 灰色不可點擊
- [ ] 「HTTP: 8891」- 顯示實際 HTTP 端口（灰色）
- [ ] 「WebSocket: 8892」- 顯示實際 WebSocket 端口（灰色）
- [ ] 分隔線顯示
- [ ] 「結束」- 完全關閉應用程式

#### 托盤圖示點擊

- [ ] 單擊托盤圖示：視窗顯示 ↔ 隱藏切換
- [ ] 視窗隱藏時，再次點擊會顯示
- [ ] 視窗顯示時，再次點擊會隱藏

---

### 🔌 端口自動偵測測試

#### 測試 1: 正常啟動

```bash
npm start
```

- [ ] 使用預設端口 8891/8892
- [ ] 托盤選單顯示正確端口
- [ ] 控制台顯示「✅ HTTP Port: 8891」
- [ ] 控制台顯示「✅ WebSocket Port: 8892」

#### 測試 2: 端口被佔用

1. 佔用預設端口
   ```bash
   # 在另一個終端機
   python3 -m http.server 8891
   ```

2. 啟動 DopeMAN
   ```bash
   npm start
   ```

驗證項目：

- [ ] 應用程式正常啟動（未報錯）
- [ ] 自動切換到其他端口（例如 8892）
- [ ] WebSocket 也相應調整（例如 8893）
- [ ] 托盤選單顯示實際使用的端口
- [ ] Dashboard 正常運作

#### 測試 3: 多個端口被佔用

1. 佔用多個端口
   ```bash
   python3 -m http.server 8891 &
   python3 -m http.server 8892 &
   python3 -m http.server 8893 &
   ```

2. 啟動 DopeMAN
   ```bash
   npm start
   ```

驗證項目：

- [ ] 自動跳過被佔用的端口
- [ ] 找到可用端口（例如 8894/8895）
- [ ] 應用程式正常運作

---

### 🐛 錯誤處理測試

#### 測試 1: Python 依賴檢查 ⚠️ 重要

**前置條件：應用程式需要系統安裝 Python 3**

```bash
# 檢查 Python 是否已安裝
python3 --version

# 預期輸出：Python 3.x.x
```

若未安裝：
```bash
# macOS 使用 Homebrew 安裝
brew install python3
```

測試應用程式在無 Python 環境下的行為：
```bash
# 臨時重命名 python3（需要管理員權限）
sudo mv /usr/bin/python3 /usr/bin/python3.bak

npm start

# 還原
sudo mv /usr/bin/python3.bak /usr/bin/python3
```

- [ ] 顯示明確錯誤訊息
- [ ] 提示需要安裝 Python 3
- [ ] 應用程式優雅退出（不 crash）

#### 測試 2: WebSocket 啟動失敗

- [ ] 錯誤訊息記錄到控制台
- [ ] 應用程式嘗試重啟或提示使用者

---

### 📦 打包測試（macOS）

#### 1. 執行打包

```bash
npm run build:mac
```

驗證項目：

- [ ] 打包過程無錯誤
- [ ] 產出 `dist/DopeMAN-1.0.0.dmg` (x64 版本)
- [ ] 產出 `dist/DopeMAN-1.0.0-arm64.dmg` (arm64 版本)
- [ ] 檔案大小合理（x64: ~101 MB, arm64: ~96 MB）

#### 2. 安裝測試

1. 雙擊 `DopeMAN-1.0.0.dmg`
   - [ ] DMG 檔案正常掛載
   - [ ] 顯示拖曳安裝視窗

2. 拖曳 DopeMAN.app 到 Applications
   - [ ] 複製成功
   - [ ] 無錯誤訊息

3. 從 Applications 啟動
   - [ ] 第一次可能需要「安全性與隱私權」允許
   - [ ] 應用程式正常啟動
   - [ ] 圖示顯示正確

#### 3. 功能驗證

執行上述所有測試項目：

- [ ] 基本功能測試
- [ ] 單一實例測試
- [ ] 托盤功能測試
- [ ] 端口偵測測試

---

### 🎨 圖示測試

#### App 圖示

- [ ] Dock 中的圖示清晰（512x512）
- [ ] Launchpad 中的圖示清晰（128x128）
- [ ] Finder 中的圖示清晰（32x32）
- [ ] 顏色正確（紫色漸層）
- [ ] 元素清晰（資料夾、齒輪、星星）

#### 托盤圖示

- [ ] 系統托盤圖示清晰（16x16）
- [ ] 淺色模式下可辨識
- [ ] 深色模式下可辨識
- [ ] 符號簡潔清楚

---

### ⚡ 效能測試

#### 啟動時間

- [ ] 冷啟動 < 3 秒
- [ ] 熱啟動 < 2 秒

#### 記憶體使用

```bash
# 啟動後檢查
ps aux | grep DopeMAN
```

- [ ] 記憶體使用 < 200 MB
- [ ] 閒置時 CPU < 5%

#### 功能回應

- [ ] 點擊按鈕即時回應（< 100ms）
- [ ] 視窗切換流暢
- [ ] 托盤選單開啟快速

---

### 🔄 整合測試

#### 完整工作流程

1. 啟動應用程式
   - [ ] 正常啟動

2. 開啟 Dashboard
   - [ ] 資料正常載入

3. 執行掃描任務
   - [ ] 任務正常執行
   - [ ] 進度即時更新

4. 切換到任務監控
   - [ ] 頁面正常切換

5. 執行健康檢查
   - [ ] 任務正常執行
   - [ ] 結果正確顯示

6. 最小化到托盤
   - [ ] 視窗隱藏
   - [ ] 托盤圖示持續顯示

7. 從托盤重新開啟
   - [ ] 視窗恢復

8. 完全退出
   - [ ] 所有進程正常關閉
   - [ ] 托盤圖示消失

---

## 📝 測試結果記錄

### 測試日期: ___________
### 測試者: ___________
### 測試環境:
- macOS 版本: ___________
- Node.js 版本: ___________
- Python 版本: ___________

### 通過項目: ___ / ___
### 失敗項目: ___

### 發現問題:

1. ______________________________________
2. ______________________________________
3. ______________________________________

### 備註:

_____________________________________________
_____________________________________________
_____________________________________________

---

## ✅ 測試完成標準

所有以下項目必須通過：

- [ ] **前置條件**：系統已安裝 Python 3 ⚠️
- [ ] 基本功能 100% 通過
- [ ] 單一實例測試通過
- [ ] 托盤功能完整運作
- [ ] 端口自動偵測正常
- [ ] 無重大錯誤或 Crash
- [ ] 效能符合預期
- [ ] 圖示顯示正確
- [ ] 打包產物完整（x64 + arm64 兩個 DMG）

---

**準備開始測試？**

```bash
cd /Users/paul_huang/AgentProjects/dopeman/dopeman-app
npm install
npm run dev
```

祝測試順利！ 🎉
